<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Teste</title>
</head>
<link rel="stylesheet" href="extension/jquery.mobile-1.3.2/jquery.mobile-1.3.2.css" />
<script src="extension/jquery-1.9.1.min.js"></script>
<script src="extension/jquery.mobile-1.3.2/jquery.mobile-1.3.2.min.js"></script>

<script type="text/javascript" src="src/js/funcoes.js"></script>
<script type="text/javascript" src="src/js/jquery.funcoes.js"></script>
<style type="text/css">
.ui-listview-filter, .ui-listview {
	margin-top: 15px
}
.selecionado{
	background-color: #aaa;
	color: #fff
}

</style>

<body>

<div style="padding: 5px;">
	<template>
	    <input id="filter-for-listview" data-type="search" placeholder="Type to search...">
	</template>
	<ul id="produtos" data-role="listview" data-inset="true" data-filter="true" data-input="#filter-for-listview">
	    <li><a href="#">Acura</a></li>
	    <li><a href="#">Audi</a></li>
	    <li><a href="#">BMW</a></li>
	    <li><a href="#">Cadillac</a></li>
	    <li><a href="#">Ferrari</a></li>
	</ul>
	<button onclick="">SET</button>
	<button onclick="">DEL</button>

</div>


<script type="text/javascript">









function criaCarrinho(){

	let listaDeProdutos={

		selected:'45254',
		lista:{}
	}

	listaDeProdutos.somarUm = (ProdutoId)=>{
		if(listaDeProdutos.lista[ProdutoId]){
			return ++listaDeProdutos.lista[ProdutoId].qnt;
		}else{
			return 1
		}
	}

	listaDeProdutos.subtrairUm = (ProdutoId)=>{
		if(listaDeProdutos.lista[ProdutoId]){
			return --listaDeProdutos.lista[ProdutoId].qnt;
		}
	}

	listaDeProdutos.setProdutoNaLista=(values)=>{
		
		let produtoID = values.id;
		let produtoNome = values.nome;
		let produtoPreco = values.preco.toFixed(2);
		let produtoQnt = listaDeProdutos.somarUm(produtoID);
		let produtoTotal =  (produtoQnt*values.preco).toFixed(2);

		listaDeProdutos.lista[produtoID] = {
			id:produtoID,
			nome:produtoNome,
			preco:produtoPreco,
			qnt:produtoQnt,
			total:produtoTotal,
		}
	}

	listaDeProdutos.delProdutoNaLista=(values)=>{
		delete listaDeProdutos.lista[values];
	}

	return listaDeProdutos;
}

const carrinho = criaCarrinho();
carrinho.setProdutoNaLista({
	id:45254,
	nome:'Vaneta1',
	preco:10.25,
});

carrinho.setProdutoNaLista({
	id:45252,
	nome:'Vaneta23',
	preco:10.5,
});	
carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta24',
	preco:0.25,
});

carrinho.subtrairUm(45253);
carrinho.subtrairUm(45253);
carrinho.subtrairUm(45253);

carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta25',
	preco:0.25,
});	
carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta26',
	preco:0.25,
});
carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta27',
	preco:0.25,
});
carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta28',
	preco:0.25,
});
carrinho.setProdutoNaLista({
	id:45253,
	nome:'Vaneta29',
	preco:2.65,
});		
carrinho.setProdutoNaLista({
	id:45255,
	nome:'Vaneta210',
	preco:1.39,
});
carrinho.setProdutoNaLista({
	id:45256,
	nome:'Vaneta211',
	preco:1.5,
});
carrinho.delProdutoNaLista(45256);	

	$('#produtos').templateJquery({
		data:carrinho.lista,
		template:'<li><a href="#">{nome}</a></li>',
		onRender:function(objeto){
			console.log(objeto);
		}
	})


 
	$('li').keySeletor({
		classSeletor:"ui-btn-hover-c",
		classKey:'body',
		onSelect:function(index,objeto){
			cl(index);
		},
		onSend:function(index,objeto){
			alert(objeto);
		}
	});



</script>
</body>
</html>