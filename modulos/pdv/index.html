<div id="pdvLayout"></div>
<script type="text/javascript" src="modulos/pdv/classes/classVenda.js"></script>
<script type="text/javascript" src="modulos/pdv/classes/classProdutos.js"></script>
<script type="text/javascript">
$( document ).ready(function() {

	/*-----------------------------------------------------------------*/
	const venda = new Vendas({
		fit:true,
		onCreate:function(params){
			$('#pdvLayout').layout(params);
		},
		onSet:function(params){					
			$('#pdvLayout').layout('add',params);
		}
	});

	/*-----------------------------------------------------------------*/
	venda.set({//Gera Menu Superior do Modulo
	    region: 'north',
	    border:0,
	    bodyCls:'gradiente1'
	});

	venda.set({//Gera conteudo Central do Modulo
	    region: 'center',
	    border:0,
	    bodyCls:'sombra_Interna_foot pdg5',
	    content:'<div id="contentPdv"></div>'
	});


	/*-----------------------------------------------------------------*/
	const pdvProduto = new PdvProdutos({
		fit:true,
		onCreate:function(params){
			$('#contentPdv').layout(params);
		},
		onSet:function(params){					
			$('#contentPdv').layout('add',params);
		}
	});

	/*-----------------------------------------------------------------*/
	pdvProduto.set({//Gera Contedudo de Produtos
	    region: 'west',
	    width: 380,
	    border:0,
	    title:'Termina: CAIXA1',
	    split:true,
	    href:'modulos/pdv/blocos/produtos.html'
	});

	pdvProduto.set({//Gera Conteudo de Carrinhos
	    region: 'center',
	    border:0,
	    href:'modulos/pdv/blocos/carrinhos.html'
	});

});

//////Cria Buscador
/////////////////////////////////////////////////////////////////////////////
$('body').teclas({
	keyDown:function(){

		if (!$('#buscaPorCodigo').is(":focus")) {
		  $('#buscaPorCodigo').select()
		}

	},
	188:function(){ //Tecla < = Muda de Pasta de Venda para Esquerda

		var tab = $('#blockCarrinhos').tabs('getSelected');
		var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
		$('#blockCarrinhos').tabs('select', index-1);							

	},	
	190:function(){ //Livre > Muda de Pasta de Venda para a Direita

		var tab = $('#blockCarrinhos').tabs('getSelected');
		var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
		$('#blockCarrinhos').tabs('select', index+1);								

	},	
	Enter:function(){
		//$('#listaDeProdutos').datalist('unselectAll');
	},
	F2:function(){ //Livre

									

	},
	F4:function(){ //Abre nova Venda
		
		/*-----------------------------------------------------------------*/
		carrinhos.set({ //Gera Contedudo de Produtos
		    title:'Venda',
		    id:totalVendas(),
		    closable:true,
		    produtos:[]    
		});

	},
	F5:function(){ 

	},
	F9:function(){ //Imprimir

		var carrinhoJson = JSON.stringify('criaCarrinhoDeCompras');				
		postPrint(carrinhoJson,'modulos/pdv/print.php');

	},	
	Delete:function(){ //Deleta Item Selecionado

		carrinhos.delCarrinho(carrinhos.getselectProduto());

	},	
	'+':function(){
		carrinhos.setCarrinho(carrinhos.getselectProduto());
	},
	'/':function(){ //Remove Item
		carrinhos.subSelectProduto(carrinhos.getselectProduto());
	},				
	Escape:function(){ //Limpa Campos e Fecha Vendas

		if($('#buscaPorCodigo').val().length==0){	
			var tab = $('#blockCarrinhos').tabs('getSelected');
			var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
			$('#blockCarrinhos').tabs('close', index);								
		}

	},
	ArrowLeft:function(){ //Seleciona Lista Pra Esquerda

		$(window.listSelected).datalist('unselectAll');
		window.listSelected = '#listaProdutos';	
		$(window.listSelected).datalist('selectRow',0);	

	},	
	ArrowRight:function(){ //Seleciona Lista Pra Direita

		$("window.listSelected").datalist('unselectAll');
		window.listSelected = '#'+tableSelect;
		$(window.listSelected).datalist('selectRow',0);	

	},					
	ArrowUp:function(){ //Seleciona para Cima

		var getSelected = $('#listaDeProdutos').datalist('getSelected');
		var getRowIndex = $('#listaDeProdutos').datalist('getRowIndex',getSelected);		
		$('#listaDeProdutos').datalist('selectRow',getRowIndex-1);	

	},
	ArrowDown:function(){ //Seleciona para Baixo

		var getSelected = $('#listaDeProdutos').datalist('getSelected');
		var getRowIndex = $('#listaDeProdutos').datalist('getRowIndex',getSelected);		
		$('#listaDeProdutos').datalist('selectRow',getRowIndex+1);	

	}
});	


</script>