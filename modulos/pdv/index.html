<div id="pdvLayout"></div>
<script type="text/javascript">
$( document ).ready(function() {

	//Gera Layout de PDV
	/*-----------------------------------------------------------------*/
	$('#pdvLayout').layout({fit:true,});
	$('#pdvLayout').layout('add',{//Gera Menu Superior do Modulo
	    region: 'north',
	    border:0,
	    bodyCls:'gradiente1'
	});
	$('#pdvLayout').layout('add',{//Gera conteudo Central do Modulo
	    region: 'center',
	    border:0,
	    bodyCls:'sombra_Interna_foot pdg5',
	    content:'<div id="contentPdv"></div>'
	});

	//Gera Layout de PDV
	/*-----------------------------------------------------------------*/
	$('#contentPdv').layout({fit:true,});
	$('#contentPdv').layout('add',{//Gera Contedudo de Produtos
	    region: 'west',
	    width: 380,
	    border:0,
	    title:'Termina: CAIXA1',
	    split:true,
	    href:'modulos/pdv/blocos/produtos.html'
	});

	$('#contentPdv').layout('add',{//Gera Conteudo de Carrinhos
	    region: 'center',
	    border:0,
	    href:'modulos/pdv/blocos/carrinhos.html'
	});

});


//Seleciona lista Padrão
/*-----------------------------------------------------------------*/
window.listSelected = '#listaDeProdutos';	

//Tecla de Comando do Sistema
/*-----------------------------------------------------------------*/
$('body').teclas({
	keyDown:function(){ //Ao Precionar Qualquer Tecla Focar no Campo de busca
		if (!$('#buscaPorCodigo').is(":focus")) {
		  $('#buscaPorCodigo').select()
		}
	},
	188:function(){ //Tecla < = Muda de Pasta de Venda para Esquerda
		var tab = $('#blockCarrinhos').tabs('getSelected');
		var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
		$('#blockCarrinhos').tabs('select', index-1);							
	},	
	190:function(){ //Livre > Muda de Pasta de Venda para a Direita
		var tab = $('#blockCarrinhos').tabs('getSelected');
		var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
		$('#blockCarrinhos').tabs('select', index+1);								
	},	
	Enter:function(){
		//$('#listaDeProdutos').datagrid('unselectAll');
	},
	F2:function(){ //Livre

									

	},
	F4:function(){ //Abre nova Venda
		
		/*-----------------------------------------------------------------*/
		carrinhos.set({ //Gera Contedudo de Produtos
		    title:'Venda',
		    id:totalVendas(),
		    closable:true,
		    produtos:[]    
		});

	},
	F5:function(){ 

	},
	F9:function(){ //Imprimir

		var carrinhoJson = JSON.stringify('criaCarrinhoDeCompras');				
		postPrint(carrinhoJson,'modulos/pdv/print.php');

	},	
	Delete:function(){ //Deleta Item Selecionado
		carrinhos.delCarrinho(carrinhos.getselectProduto());
	},	
	'+':function(){
		carrinhos.setCarrinho(carrinhos.getselectProduto());
	},
	'/':function(){ //Remove Item
		carrinhos.subSelectProduto(carrinhos.getselectProduto());
	},				
	Escape:function(){ //Limpa Campos e Fecha Vendas
		if($('#buscaPorCodigo').val().length==0){	
			var tab = $('#blockCarrinhos').tabs('getSelected');
			var index = $('#blockCarrinhos').tabs('getTabIndex',tab);			
			$('#blockCarrinhos').tabs('close', index);								
		}
	},
	
	//Teclas de Seleção de Itens
	/*-----------------------------------------------------------------*/
	ArrowLeft:function(){ //Seleciona Lista Pra Esquerda
		window.listSelected = '#listaDeProdutos';	
		$(window.listSelected).datagrid('selectRow',0);	
	},	
	ArrowRight:function(){ //Seleciona Lista Pra Direita
		window.listSelected = `#list_${carrinhos.selected}`;
		$(window.listSelected).datagrid('selectRow',0);	
	},					
	ArrowUp:function(){ //Seleciona para Cima
		var getSelected = $(window.listSelected).datagrid('getSelected');
		var getRowIndex = $(window.listSelected).datagrid('getRowIndex',getSelected);		
		$(window.listSelected).datagrid('selectRow',getRowIndex-1);	
	},
	ArrowDown:function(){ //Seleciona para Baixo
		var getSelected = $(window.listSelected).datagrid('getSelected');
		var getRowIndex = $(window.listSelected).datagrid('getRowIndex',getSelected);		
		$(window.listSelected).datagrid('selectRow',getRowIndex+1);	
	}
});	

</script>